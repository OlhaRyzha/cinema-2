<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cinema | {{page_name}}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'main/css/base.css' %}">
    {% block extracss %}{% endblock extracss %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js" integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y" crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <div class="logo">
            <img src="{% static 'main/images/logo.png' %}" alt="Cinema Logo">
        </div>
        <nav>
            <a href="{% url 'home' %}">Головна</a></li>
            <a href="{% url 'type_view' type_num=1 %}">Фільми</a></li>
            <a href="{% url 'type_view' type_num=2 %}">Серіали</a></li>
            <a href="{% url 'type_view' type_num=3 %}">Мультфільми</a></li>
            <a href="{% url 'type_view' type_num=4 %}">Аніме</a></li>
        </nav>
    </header>
    <main>
        <div class="content">
            {% block content %}{% endblock content %}
            <form action="{% url 'create_review' %}" class=" g-3 needs-validation" novalidate method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="col-md-4">
                    <label for="validationCustom01" class="form-label">Name</label>
                    <input type="text" name="name" class="form-control" id="validationCustom01" value="" required>
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                </div>
                <div class="col-md-4">
                    <label for="validationCustom02" class="form-label">Mark</label>
                    <input type="number" name="mark" class="form-control" min="1" max="10" id="validationCustom02" value="" required>
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                </div>
                <div class="col-md-4">
                    <label for="validationCustom03" class="form-label">Text</label>
                    <textarea name="text" class="form-control" id="validationCustom03" value="" required></textarea>
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                </div>
                <div class="col-12">
                    <button class="btn btn-primary" type="submit">Submit form</button>
                </div>
                {{request.GET.error_message}}
                {% if error_message %}
                <p style="color: red;">{{error_message}}</p>
                {% endif %}
            </form>


            <h2>Відгуки користувачів</h2>
            <div class="site-reviews">
                {% for review in site_reviews %}
                    <div class="review-card">
                        <h3>{{ review.name }} - Оцінка: {{ review.mark }}</h3>
                        <p>{{ review.text }}</p>
                        <p class="created-time">{{ review.created_time }}</p>
                    </div>
                {% endfor %}
            </div>
        </div>
        <div class="filters">
            <h2>Рік випуску:</h2>
            {% for year in years %}
                <a href="{% url 'year_view' year=year %}">{{ year }}</a>
            {% endfor %}
        </div>
    </main>
    <footer>
    2024 &copy; Cinema
    </footer>
    
    <script>
        // Example starter JavaScript for disabling form submissions if there are invalid fields
    (() => {
    'use strict'

    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    const forms = document.querySelectorAll('.needs-validation')

    // Loop over them and prevent submission
    Array.from(forms).forEach(form => {
        form.addEventListener('submit', event => {
        if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
        }

        form.classList.add('was-validated')
        }, false)
    })
    })()
    </script>
</body>
</html>